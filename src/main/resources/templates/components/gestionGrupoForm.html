<!-- /templates/components/gestionGrupoForm.html -->
<link href="css/style.css" rel="stylesheet">

<div th:fragment="gestionGrupoForm">
  <div id="gestion">
    <div class="container py-5">
      <div class="text-center pb-2">
        <h1 class="mb-4">Seleccione para Gestionar</h1>
      </div>
      <div class="row justify-content-center">
        <div id="reporte" class="col-12">

          <!-- Menú: Selección de Semestre y Grupo -->
          <div class="row select-container mb-3">
            <div class="col-md-6 mb-3">
              <label for="idSemestre" class="form-label">Selecciona un semestre:</label>
              <select id="idSemestre" class="form-select"
                      onchange="cargarGruposPorSemestre()">
                <option value="">Selecciona un semestre</option>
                <th:block th:each="semestre : ${semestres}">
                  <option th:value="${semestre.idSemestre}"
                          th:text="${semestre.nombre}"></option>
                </th:block>
              </select>
            </div>
            <div class="col-md-6 mb-3">
              <label for="idGrupo" class="form-label">Selecciona un grupo:</label>
              <select id="idGrupo" class="form-select"
                      onchange="handleSelectChange()">
                <option value="">Selecciona un grupo</option>
              </select>
            </div>
          </div>

          <!-- Contenedor de pestañas -->
          <div id="tabContainer" class="mb-3"></div>
          <div id="tabContentContainer">
            
            <!-- === Pestaña “Todas las Materias” === -->
            <div id="tabContentTodasMaterias" class="tab-content hidden">

              <!-- Indicador de carga (mientras el JS trae datos) -->
              <div id="loadingTodasMaterias" class="text-center mb-3" style="display: none;">
                Cargando...
              </div>

              <!-- ===== Scroll sincronizado: parte superior ===== -->
              <div id="scrollbarContainerTop" class="overflow-auto mb-2">
                <div id="dummyScrollTop"></div>
              </div>

              <!-- ===== Contenedor principal de la tabla ===== -->
              <div id="tableContainer" class="table-responsive" style="position: relative;">
                <table class="table table-bordered table-sm mb-0">
                  <thead id="encabezadosConsolidado"></thead>
                  <tbody id="cuerpoTablaConsolidado"></tbody>
                </table>
              </div>

              <!-- ===== Scroll sincronizado: parte inferior ===== -->
              <div id="scrollbarContainerBottom" class="overflow-auto mt-1">
                <div id="dummyScrollBottom"></div>
              </div>

              <!-- ===== Controles de paginación ===== -->
              <nav aria-label="Paginación Alumnos" class="mt-3">
                <ul class="pagination justify-content-center" id="paginationControls"></ul>
              </nav>
            </div>

            <!-- Puedes agregar más pestañas aquí, como “Por Materia” -->
            <!-- <div id="tabContentPorMateria" class="tab-content hidden"> … </div> -->

          </div>
          <!-- Fin de tabContentContainer -->

          <!-- Indicador de carga general (si lo usas en otras pestañas) -->
          <div id="loading" class="text-center" style="display: none;">
            Cargando...
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
